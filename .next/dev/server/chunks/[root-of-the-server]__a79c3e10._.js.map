{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/arturogrottoli/Downloads/python-movies-main%203/app/api/movies/add/route.ts"],"sourcesContent":["const API_BASE_URL = process.env.API_BASE_URL || \"http://localhost:8000\"\n\nexport async function POST(request: Request) {\n  try {\n    const movie = await request.json()\n    const authHeader = request.headers.get(\"authorization\")\n    console.log(\"üîç [Next.js Proxy] Authorization header:\", authHeader ? `${authHeader.substring(0, 50)}...` : \"NOT FOUND\")\n\n    if (!authHeader) {\n      return Response.json({ error: \"Authorization header is required\" }, { status: 401 })\n    }\n\n    console.log(\"üîç [Next.js Proxy] Forwarding to backend:\", `${API_BASE_URL}/api/movies/add-watchlist`)\n    const response = await fetch(`${API_BASE_URL}/api/movies/add-watchlist`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: authHeader,\n      },\n      body: JSON.stringify({\n        title: movie.title,\n        year: movie.year,\n        rating: movie.rating || 0,\n        poster: movie.poster || \"/placeholder.svg\",\n      }),\n    })\n\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({ detail: \"Error desconocido\" }))\n      return Response.json({ error: error.detail || \"Failed to add movie\" }, { status: response.status })\n    }\n\n    const data = await response.json()\n    return Response.json(data)\n  } catch (error) {\n    console.error(\"Error adding movie:\", error)\n    if (error instanceof TypeError && error.message.includes(\"fetch\")) {\n      return Response.json({ error: \"El backend no est√° corriendo. Por favor, inicia el servidor Python en el puerto 8000.\" }, { status: 503 })\n    }\n    return Response.json({ error: \"Failed to add movie\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,MAAM,eAAe,QAAQ,GAAG,CAAC,YAAY,IAAI;AAE1C,eAAe,KAAK,OAAgB;IACzC,IAAI;QACF,MAAM,QAAQ,MAAM,QAAQ,IAAI;QAChC,MAAM,aAAa,QAAQ,OAAO,CAAC,GAAG,CAAC;QACvC,QAAQ,GAAG,CAAC,4CAA4C,aAAa,GAAG,WAAW,SAAS,CAAC,GAAG,IAAI,GAAG,CAAC,GAAG;QAE3G,IAAI,CAAC,YAAY;YACf,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAAmC,GAAG;gBAAE,QAAQ;YAAI;QACpF;QAEA,QAAQ,GAAG,CAAC,6CAA6C,GAAG,aAAa,yBAAyB,CAAC;QACnG,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,yBAAyB,CAAC,EAAE;YACvE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,eAAe;YACjB;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,OAAO,MAAM,KAAK;gBAClB,MAAM,MAAM,IAAI;gBAChB,QAAQ,MAAM,MAAM,IAAI;gBACxB,QAAQ,MAAM,MAAM,IAAI;YAC1B;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,QAAQ,MAAM,SAAS,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,QAAQ;gBAAoB,CAAC;YAChF,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO,MAAM,MAAM,IAAI;YAAsB,GAAG;gBAAE,QAAQ,SAAS,MAAM;YAAC;QACnG;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,OAAO,SAAS,IAAI,CAAC;IACvB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,IAAI,iBAAiB,aAAa,MAAM,OAAO,CAAC,QAAQ,CAAC,UAAU;YACjE,OAAO,SAAS,IAAI,CAAC;gBAAE,OAAO;YAAwF,GAAG;gBAAE,QAAQ;YAAI;QACzI;QACA,OAAO,SAAS,IAAI,CAAC;YAAE,OAAO;QAAsB,GAAG;YAAE,QAAQ;QAAI;IACvE;AACF"}}]
}