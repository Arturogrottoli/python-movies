{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/arturogrottoli/Downloads/python-movies-main%203/app/api/movies/recommended/route.ts"],"sourcesContent":["const TMDB_API_KEY = process.env.TMDB_API_KEY\nconst TMDB_BASE_URL = \"https://api.themoviedb.org/3\"\nconst TMDB_IMAGE_BASE_URL = \"https://image.tmdb.org/t/p/w500\"\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url)\n  const type = searchParams.get(\"type\") || \"popular\"\n\n  if (!TMDB_API_KEY) {\n    return Response.json(\n      { \n        results: [], \n        error: \"TMDB_API_KEY no estÃ¡ configurada\" \n      }, \n      { status: 400 }\n    )\n  }\n\n  try {\n    let url = \"\"\n    \n    switch (type) {\n      case \"popular\":\n        url = `${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&page=1`\n        break\n      case \"top_rated\":\n        url = `${TMDB_BASE_URL}/movie/top_rated?api_key=${TMDB_API_KEY}&page=1`\n        break\n      case \"now_playing\":\n        url = `${TMDB_BASE_URL}/movie/now_playing?api_key=${TMDB_API_KEY}&page=1`\n        break\n      case \"upcoming\":\n        url = `${TMDB_BASE_URL}/movie/upcoming?api_key=${TMDB_API_KEY}&page=1`\n        break\n      case \"random\":\n        const randomPage = Math.floor(Math.random() * 10) + 1\n        url = `${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&page=${randomPage}`\n        break\n      default:\n        url = `${TMDB_BASE_URL}/movie/popular?api_key=${TMDB_API_KEY}&page=1`\n    }\n\n    const response = await fetch(url)\n    \n    if (!response.ok) {\n      throw new Error(\"TMDB API request failed\")\n    }\n\n    const data = await response.json()\n    \n    const movies = data.results.slice(0, 20).map((movie: any) => ({\n      id: movie.id,\n      title: movie.original_title || movie.title,\n      year: movie.release_date ? new Date(movie.release_date).getFullYear() : null,\n      rating: movie.vote_average || 0,\n      poster: movie.poster_path \n        ? `${TMDB_IMAGE_BASE_URL}${movie.poster_path}` \n        : \"/placeholder.svg\",\n      overview: movie.overview || \"\",\n    }))\n\n    return Response.json({ results: movies, type })\n  } catch (error) {\n    console.error(\"Error fetching recommended movies:\", error)\n    return Response.json(\n      { results: [], error: \"Failed to fetch recommended movies\" },\n      { status: 500 }\n    )\n  }\n}\n\n"],"names":[],"mappings":";;;;AAAA,MAAM,eAAe,QAAQ,GAAG,CAAC,YAAY;AAC7C,MAAM,gBAAgB;AACtB,MAAM,sBAAsB;AAErB,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,OAAO,aAAa,GAAG,CAAC,WAAW;IAEzC,IAAI,CAAC,cAAc;QACjB,OAAO,SAAS,IAAI,CAClB;YACE,SAAS,EAAE;YACX,OAAO;QACT,GACA;YAAE,QAAQ;QAAI;IAElB;IAEA,IAAI;QACF,IAAI,MAAM;QAEV,OAAQ;YACN,KAAK;gBACH,MAAM,GAAG,cAAc,uBAAuB,EAAE,aAAa,OAAO,CAAC;gBACrE;YACF,KAAK;gBACH,MAAM,GAAG,cAAc,yBAAyB,EAAE,aAAa,OAAO,CAAC;gBACvE;YACF,KAAK;gBACH,MAAM,GAAG,cAAc,2BAA2B,EAAE,aAAa,OAAO,CAAC;gBACzE;YACF,KAAK;gBACH,MAAM,GAAG,cAAc,wBAAwB,EAAE,aAAa,OAAO,CAAC;gBACtE;YACF,KAAK;gBACH,MAAM,aAAa,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK,MAAM;gBACpD,MAAM,GAAG,cAAc,uBAAuB,EAAE,aAAa,MAAM,EAAE,YAAY;gBACjF;YACF;gBACE,MAAM,GAAG,cAAc,uBAAuB,EAAE,aAAa,OAAO,CAAC;QACzE;QAEA,MAAM,WAAW,MAAM,MAAM;QAE7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM;QAClB;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,MAAM,SAAS,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,QAAe,CAAC;gBAC5D,IAAI,MAAM,EAAE;gBACZ,OAAO,MAAM,cAAc,IAAI,MAAM,KAAK;gBAC1C,MAAM,MAAM,YAAY,GAAG,IAAI,KAAK,MAAM,YAAY,EAAE,WAAW,KAAK;gBACxE,QAAQ,MAAM,YAAY,IAAI;gBAC9B,QAAQ,MAAM,WAAW,GACrB,GAAG,sBAAsB,MAAM,WAAW,EAAE,GAC5C;gBACJ,UAAU,MAAM,QAAQ,IAAI;YAC9B,CAAC;QAED,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS;YAAQ;QAAK;IAC/C,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,OAAO,SAAS,IAAI,CAClB;YAAE,SAAS,EAAE;YAAE,OAAO;QAAqC,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}