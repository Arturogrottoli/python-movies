{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/arturogrottoli/Downloads/python-movies-main/app/api/movies/search/route.ts"],"sourcesContent":["const TMDB_API_KEY = process.env.TMDB_API_KEY\nconst TMDB_BASE_URL = \"https://api.themoviedb.org/3\"\nconst TMDB_IMAGE_BASE_URL = \"https://image.tmdb.org/t/p/w500\"\n\nexport async function GET(request: Request) {\n  const { searchParams } = new URL(request.url)\n  const query = searchParams.get(\"q\")\n\n  if (!query) {\n    return Response.json({ results: [] })\n  }\n\n  try {\n    if (TMDB_API_KEY) {\n      const response = await fetch(\n        `${TMDB_BASE_URL}/search/movie?query=${encodeURIComponent(query)}&api_key=${TMDB_API_KEY}&language=es-ES`\n      )\n\n      if (!response.ok) {\n        throw new Error(\"TMDB API request failed\")\n      }\n\n      const data = await response.json()\n      const results = data.results.slice(0, 20).map((movie: any) => ({\n        id: movie.id,\n        title: movie.title,\n        year: movie.release_date ? new Date(movie.release_date).getFullYear() : 0,\n        rating: movie.vote_average || 0,\n        poster: movie.poster_path ? `${TMDB_IMAGE_BASE_URL}${movie.poster_path}` : \"/placeholder.svg\",\n      }))\n\n      return Response.json({ results })\n    } else {\n      const mockMovies = [\n        {\n          id: 1,\n          title: \"Oppenheimer\",\n          year: 2023,\n          rating: 8.5,\n          poster: \"/oppenheimer.jpg\",\n        },\n        {\n          id: 2,\n          title: \"The Killers of the Flower Moon\",\n          year: 2023,\n          rating: 8.0,\n          poster: \"/killers-flower-moon.jpg\",\n        },\n        {\n          id: 3,\n          title: \"Dune: Part Two\",\n          year: 2024,\n          rating: 8.3,\n          poster: \"/dune-part-two.jpg\",\n        },\n        {\n          id: 4,\n          title: \"Inception\",\n          year: 2010,\n          rating: 8.8,\n          poster: \"/placeholder.svg\",\n        },\n        {\n          id: 5,\n          title: \"Interstellar\",\n          year: 2014,\n          rating: 8.7,\n          poster: \"/placeholder.svg\",\n        },\n      ]\n\n      const results = mockMovies.filter((movie) => movie.title.toLowerCase().includes(query.toLowerCase()))\n\n      return Response.json({ results })\n    }\n  } catch (error) {\n    console.error(\"TMDB API Error:\", error)\n    return Response.json({ results: [], error: \"Search failed\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA,MAAM,eAAe,QAAQ,GAAG,CAAC,YAAY;AAC7C,MAAM,gBAAgB;AACtB,MAAM,sBAAsB;AAErB,eAAe,IAAI,OAAgB;IACxC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,QAAQ,aAAa,GAAG,CAAC;IAE/B,IAAI,CAAC,OAAO;QACV,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS,EAAE;QAAC;IACrC;IAEA,IAAI;QACF,IAAI,cAAc;YAChB,MAAM,WAAW,MAAM,MACrB,GAAG,cAAc,oBAAoB,EAAE,mBAAmB,OAAO,SAAS,EAAE,aAAa,eAAe,CAAC;YAG3G,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM;YAClB;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,UAAU,KAAK,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,GAAG,CAAC,CAAC,QAAe,CAAC;oBAC7D,IAAI,MAAM,EAAE;oBACZ,OAAO,MAAM,KAAK;oBAClB,MAAM,MAAM,YAAY,GAAG,IAAI,KAAK,MAAM,YAAY,EAAE,WAAW,KAAK;oBACxE,QAAQ,MAAM,YAAY,IAAI;oBAC9B,QAAQ,MAAM,WAAW,GAAG,GAAG,sBAAsB,MAAM,WAAW,EAAE,GAAG;gBAC7E,CAAC;YAED,OAAO,SAAS,IAAI,CAAC;gBAAE;YAAQ;QACjC,OAAO;YACL,MAAM,aAAa;gBACjB;oBACE,IAAI;oBACJ,OAAO;oBACP,MAAM;oBACN,QAAQ;oBACR,QAAQ;gBACV;gBACA;oBACE,IAAI;oBACJ,OAAO;oBACP,MAAM;oBACN,QAAQ;oBACR,QAAQ;gBACV;gBACA;oBACE,IAAI;oBACJ,OAAO;oBACP,MAAM;oBACN,QAAQ;oBACR,QAAQ;gBACV;gBACA;oBACE,IAAI;oBACJ,OAAO;oBACP,MAAM;oBACN,QAAQ;oBACR,QAAQ;gBACV;gBACA;oBACE,IAAI;oBACJ,OAAO;oBACP,MAAM;oBACN,QAAQ;oBACR,QAAQ;gBACV;aACD;YAED,MAAM,UAAU,WAAW,MAAM,CAAC,CAAC,QAAU,MAAM,KAAK,CAAC,WAAW,GAAG,QAAQ,CAAC,MAAM,WAAW;YAEjG,OAAO,SAAS,IAAI,CAAC;gBAAE;YAAQ;QACjC;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,SAAS,IAAI,CAAC;YAAE,SAAS,EAAE;YAAE,OAAO;QAAgB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACF"}}]
}